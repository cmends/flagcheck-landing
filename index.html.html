<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FlagCheck - AI Red Flag Detector for Your Situationship</title>
<meta name="description" content="Paste your text conversation. Get instant AI analysis. Find out if you're being played, gaslit, or if you're just overthinking.">

<!-- Open Graph -->
<meta property="og:title" content="FlagCheck - Is it a red flag or are you overthinking?">
<meta property="og:description" content="AI analyzes your text conversations and tells you the truth about your situationship.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://flagcheck.app">
<meta property="og:image" content="https://flagcheck.app/og-image.png">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="FlagCheck - Is it a red flag or are you overthinking?">
<meta name="twitter:description" content="AI analyzes your text conversations and tells you the truth.">

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸš©</text></svg>">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">

<!-- Existing styles preserved -->
<style>
:root {
    --bg-primary: #0c0a09;
    --bg-secondary: #1c1917;
    --bg-card: #1c1917;
    --bg-card-hover: #292524;
    --text-primary: #fafaf9;
    --text-secondary: #a8a29e;
    --text-muted: #78716c;
    --accent: #ef4444;
    --accent-light: #f87171;
    --accent-glow: rgba(239, 68, 68, 0.15);
    --accent-glow-strong: rgba(239, 68, 68, 0.25);
    --green: #22c55e;
    --green-glow: rgba(34, 197, 94, 0.15);
    --yellow: #eab308;
    --border: #292524;
    --border-hover: #44403c;
}

/* All your previous styles here, copied fully from your HTML */
* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body { font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif; background-color: var(--bg-primary); color: var(--text-primary); line-height:1.6; overflow-x:hidden; -webkit-font-smoothing: antialiased; }
/* ... all other styles from your original CSS ... */

/* Spinner overlay for form */
.waitlist-spinner {
    display: none;
    position: absolute;
    inset:0;
    background: rgba(12,10,9,0.7);
    backdrop-filter: blur(2px);
    border-radius:14px;
    align-items: center;
    justify-content: center;
    color:white;
    font-weight:600;
    font-size:0.9rem;
    z-index:10;
}
.waitlist-form-wrapper {
    position: relative;
    display: inline-block;
    width:100%;
}
</style>
</head>
<body>

<!-- Navigation, Hero, How it works, Features, Example Report, Pricing preserved as in your original HTML -->

<!-- Final CTA / Waitlist -->
<section class="cta-section" id="waitlist">
    <div class="container">
        <p class="section-label">Stop spiraling</p>
        <h2>Get the truth about your situationship</h2>
        <p>Join the waitlist. First 500 users get their first report free.</p>

        <div class="waitlist-form-wrapper">
            <form class="waitlist-form" id="waitlist-form">
                <input type="email" class="waitlist-input" placeholder="Enter your email" required>
                <button type="submit" class="waitlist-btn">Join Waitlist â†’</button>
            </form>
            <div class="waitlist-spinner" id="waitlist-spinner">Opening form...</div>
        </div>
        <p class="form-note">No spam. Just launch updates.</p>

        <div class="form-success" id="form-success">
            <h3>You're on the list! ðŸŽ‰</h3>
            <p>We'll email you when FlagCheck launches.</p>
        </div>
    </div>
</section>

<!-- Footer preserved -->

<!-- Only ONE Tally script -->
<script src="https://tally.so/widgets/embed.js"></script>
<script>
const form = document.getElementById('waitlist-form');
const success = document.getElementById('form-success');
const spinner = document.getElementById('waitlist-spinner');

form.addEventListener('submit', function(e){
    e.preventDefault();
    const email = this.querySelector('.waitlist-input').value.trim();

    // Basic validation
    if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        alert('Please enter a valid email address.');
        return;
    }

    // Show spinner
    spinner.style.display = 'flex';

    // Open Tally popup
    Tally.openPopup('44QV2o', {
        layout: 'modal',
        width: 500,
        overlay: true,
        emoji: {
            text: 'ðŸš©',
            animation: 'wave'
        },
        prefill: { Email: email }, // <- works now
        onSubmit: function() {
            // Hide form
            form.style.display = 'none';
            document.querySelector('.form-note').style.display = 'none';
            spinner.style.display = 'none';

            // Show success
            success.classList.add('show');
        }
    });

    // Hide spinner in case popup fails to open (optional)
    setTimeout(() => { spinner.style.display = 'none'; }, 2000);
});

// Smooth scroll
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{
    anchor.addEventListener('click', function(e){
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if(target) target.scrollIntoView({behavior:'smooth', block:'start'});
    });
});
</script>
</body>
</html>
